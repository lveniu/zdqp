# === 抢券系统主配置文件 ===

# 应用配置
app:
  env: development  # development, production
  debug: true

# 日志配置
log:
  level: INFO  # DEBUG, INFO, WARNING, ERROR, SUCCESS
  dir: logs
  rotation: "100 MB"
  retention: "30 days"

  # 新日志框架配置
  framework:
    # 日志分类文件开关
    category_files:
      api: true      # API请求日志
      grab: true     # 抢券日志
      checkin: true  # 签到日志
      points: true   # 积分日志
      json: true     # JSON格式日志

    # 推送配置
    push:
      enabled: true  # 是否启用重要日志推送
      channels: ["serverchan", "telegram"]  # 推送渠道

      # 推送级别阈值
      push_levels:
        - SUCCESS    # 抢券成功
        - ERROR      # 错误
        - CRITICAL   # 严重错误

    # 日志保留策略
    retention_policies:
      app: "30 days"      # 主应用日志
      error: "90 days"    # 错误日志保留更久
      grab: "60 days"     # 抢券日志
      success: "90 days"  # 成功日志

# 数据库配置
database:
  url: sqlite:///./data/coupons.db
  echo: false

# 代理配置
proxy:
  enabled: false
  pool_url: ""
  api_key: ""
  max_retries: 3
  timeout: 10

# 通知配置
notification:
  serverchan_key: ""  # ServerChan推送key
  telegram_bot_token: ""
  telegram_chat_id: ""
  dingtalk_webhook: ""
  dingtalk_secret: ""
  wechat_webhook: ""

# 浏览器配置
browser:
  headless: true
  timeout: 30000
  user_data_dir: null
  proxy: null

# 调度器配置
scheduler:
  max_workers: 10  # 最大并发任务数
  task_timeout: 60  # 任务超时时间(秒)
  retry_times: 3  # 失败重试次数
  retry_delay: 1  # 重试延迟(秒)

# 验证码服务配置
captcha:
  two_captcha_api_key: ""
  anti_captcha_api_key: ""
  timeout: 120

# 平台配置
platforms:
  taobao:
    enabled: true
    base_url: "https://www.taobao.com"
    grab_url: "https://cart.taobao.com/cart.htm"

  jd:
    enabled: true
    base_url: "https://www.jd.com"
    grab_url: "https://cart.jd.com/cart.action"

  meituan:
    enabled: true
    base_url: "https://i.meituan.com"

  pinduoduo:
    enabled: true
    base_url: "https://mobile.yangkeduo.com"
