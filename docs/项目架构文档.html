<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•´ç‚¹æŠ¢åˆ¸ç³»ç»Ÿ - é¡¹ç›®æ¶æ„æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .version {
            background: rgba(255,255,255,0.2);
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .danger {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
        section {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        h2 {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        h3 {
            color: #555;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
        }
        h4 {
            color: #666;
            margin: 20px 0 10px 0;
            font-size: 1.1em;
        }
        .arch-diagram {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }
        .component {
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
        }
        .component.api {
            border-color: #28a745;
        }
        .component.core {
            border-color: #17a2b8;
        }
        .component.platform {
            border-color: #ffc107;
        }
        .component.db {
            border-color: #dc3545;
        }
        .component.web {
            border-color: #6f42c1;
        }
        .component-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .component-title .badge {
            margin-left: 10px;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            color: white;
        }
        .badge.api { background: #28a745; }
        .badge.core { background: #17a2b8; }
        .badge.platform { background: #ffc107; color: #333; }
        .badge.db { background: #dc3545; }
        .badge.web { background: #6f42c1; }
        .file-list {
            list-style: none;
            padding-left: 0;
        }
        .file-list li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
            color: #666;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        .file-list li::before {
            content: "ğŸ“„";
            position: absolute;
            left: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }
        tr:hover {
            background: #f8f9fa;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        pre code {
            background: none;
            padding: 0;
        }
        .refactor-item {
            border-left: 3px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            background: #fff5f5;
            border-radius: 0 4px 4px 0;
        }
        .refactor-item.priority-high {
            border-left-color: #dc3545;
            background: #fff5f5;
        }
        .refactor-item.priority-medium {
            border-left-color: #ffc107;
            background: #fffbf0;
        }
        .refactor-item.priority-low {
            border-left-color: #28a745;
            background: #f0fff4;
        }
        .refactor-title {
            font-weight: bold;
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .priority-tag {
            font-size: 0.75em;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
            color: white;
        }
        .priority-tag.high { background: #dc3545; }
        .priority-tag.medium { background: #ffc107; color: #333; }
        .priority-tag.low { background: #28a745; }
        .tab-container {
            margin: 20px 0;
        }
        .tabs {
            display: flex;
            border-bottom: 2px solid #dee2e6;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1em;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .tab:hover {
            color: #667eea;
        }
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        .tab-content {
            display: none;
            padding: 20px 0;
        }
        .tab-content.active {
            display: block;
        }
        .flow-diagram {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            padding: 20px 0;
        }
        .flow-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            text-align: center;
            min-width: 120px;
        }
        .flow-arrow {
            font-size: 1.5em;
            color: #667eea;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
        }
        .stat-label {
            opacity: 0.9;
            margin-top: 5px;
        }
        .nav-menu {
            position: sticky;
            top: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        .nav-menu ul {
            list-style: none;
        }
        .nav-menu li {
            padding: 8px 0;
        }
        .nav-menu a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s;
        }
        .nav-menu a:hover {
            color: #764ba2;
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 30px;
        }
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .nav-menu {
                position: static;
                max-height: none;
            }
        }
        .duplicate-warning {
            background: repeating-linear-gradient(
                45deg,
                #fff3cd,
                #fff3cd 10px,
                #ffeeba 10px,
                #ffeeba 20px
            );
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .metrics {
            display: inline-flex;
            gap: 20px;
            flex-wrap: wrap;
            margin: 10px 0;
        }
        .metric {
            background: #f8f9fa;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        .metric strong {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¯ æ•´ç‚¹æŠ¢åˆ¸ç³»ç»Ÿ</h1>
            <span class="version">v2.0.0 å¤šç”¨æˆ·ç³»ç»Ÿ</span>
            <p style="margin-top: 15px; opacity: 0.9;">
                åŸºäºå¼‚æ­¥æ¶æ„çš„å¤šå¹³å°ä¼˜æƒ åˆ¸è‡ªåŠ¨æŠ¢è´­ç³»ç»Ÿï¼Œä¸“æ³¨äºæ‹¼å¤šå¤šç™¾äº¿è¡¥è´´å¹³å°
            </p>
            <div class="metrics" style="margin-top: 20px;">
                <div class="metric"><strong>æ¶æ„:</strong> å¼‚æ­¥ FastAPI + Vue.js</div>
                <div class="metric"><strong>æ•°æ®åº“:</strong> SQLite</div>
                <div class="metric"><strong>è®¤è¯:</strong> Token-based</div>
                <div class="metric"><strong>æ¨¡å¼:</strong> é€‚é…å™¨æ¨¡å¼</div>
            </div>
        </header>

        <div class="main-content">
            <main>
                <!-- é¡¹ç›®æ¦‚è§ˆ -->
                <section id="overview">
                    <h2>ğŸ“Š é¡¹ç›®æ¦‚è§ˆ</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number">4</div>
                            <div class="stat-label">æ ¸å¿ƒæ¨¡å—</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">50+</div>
                            <div class="stat-label">Python æ–‡ä»¶</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">4</div>
                            <div class="stat-label">Vue ç»„ä»¶</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">5</div>
                            <div class="stat-label">æ•°æ®åº“è¡¨</div>
                        </div>
                    </div>

                    <h3>æŠ€æœ¯æ ˆ</h3>
                    <table>
                        <tr>
                            <th>ç±»åˆ«</th>
                            <th>æŠ€æœ¯</th>
                            <th>ç‰ˆæœ¬/è¯´æ˜</th>
                        </tr>
                        <tr>
                            <td>åç«¯æ¡†æ¶</td>
                            <td>FastAPI</td>
                            <td>å¼‚æ­¥ Web æ¡†æ¶</td>
                        </tr>
                        <tr>
                            <td>å‰ç«¯æ¡†æ¶</td>
                            <td>Vue.js 3</td>
                            <td>Element Plus UI</td>
                        </tr>
                        <tr>
                            <td>æ•°æ®åº“</td>
                            <td>SQLite</td>
                            <td>é€šè¿‡ SQLAlchemy ORM</td>
                        </tr>
                        <tr>
                            <td>HTTP å®¢æˆ·ç«¯</td>
                            <td>httpx</td>
                            <td>å¼‚æ­¥ HTTP è¯·æ±‚</td>
                        </tr>
                        <tr>
                            <td>æµè§ˆå™¨è‡ªåŠ¨åŒ–</td>
                            <td>Playwright</td>
                            <td>Cookie è·å–</td>
                        </tr>
                        <tr>
                            <td>æ—¥å¿—</td>
                            <td>loguru</td>
                            <td>ç»“æ„åŒ–æ—¥å¿—</td>
                        </tr>
                    </table>
                </section>

                <!-- æ¶æ„å›¾ -->
                <section id="architecture">
                    <h2>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</h2>

                    <h3>åˆ†å±‚æ¶æ„å›¾</h3>
                    <div class="arch-diagram">
                        <div class="component web">
                            <div class="component-title">
                                ğŸŒ Web å‰ç«¯å±‚
                                <span class="badge web">Vue.js</span>
                            </div>
                            <ul class="file-list">
                                <li>web/src/App.vue - ä¸»åº”ç”¨ç»„ä»¶</li>
                                <li>web/src/Login.vue - ç™»å½•é¡µé¢</li>
                                <li>web/src/api.js - API å®¢æˆ·ç«¯</li>
                                <li>web/src/main.js - å…¥å£æ–‡ä»¶</li>
                            </ul>
                        </div>

                        <div style="text-align: center; color: #999; padding: 10px;">
                            â¬‡ï¸ HTTP/REST API â¬‡ï¸
                        </div>

                        <div class="component api">
                            <div class="component-title">
                                ğŸ”Œ API ç½‘å…³å±‚
                                <span class="badge api">FastAPI</span>
                            </div>
                            <ul class="file-list">
                                <li><strong>src/api/main.py</strong> - ä¸» API è·¯ç”±ï¼ˆç®€åŒ–ç‰ˆï¼‰</li>
                                <li><strong>src/api/simple.py</strong> - æ— è®¤è¯ API</li>
                                <li><strong>src/api/auth.py</strong> - è®¤è¯ APIï¼ˆå¤šç”¨æˆ·ï¼‰</li>
                            </ul>
                        </div>

                        <div style="text-align: center; color: #999; padding: 10px;">
                            â¬‡ï¸ ä¸šåŠ¡è°ƒç”¨ â¬‡ï¸
                        </div>

                        <div class="component core">
                            <div class="component-title">
                                âš™ï¸ æ ¸å¿ƒä¸šåŠ¡å±‚
                                <span class="badge core">Core</span>
                            </div>
                            <ul class="file-list">
                                <li><strong>src/core/scheduler.py</strong> - å¼‚æ­¥ä»»åŠ¡è°ƒåº¦å™¨</li>
                                <li><strong>src/core/config.py</strong> - é…ç½®ç®¡ç†</li>
                                <li><strong>src/core/logger.py</strong> - æ—¥å¿—ç³»ç»Ÿ</li>
                                <li><strong>src/core/notifier.py</strong> - é€šçŸ¥ç³»ç»Ÿ</li>
                            </ul>
                        </div>

                        <div style="text-align: center; color: #999; padding: 10px;">
                            â¬‡ï¸ å¹³å°é€‚é… â¬‡ï¸
                        </div>

                        <div class="component platform">
                            <div class="component-title">
                                ğŸ¯ å¹³å°é€‚é…å™¨å±‚
                                <span class="badge platform">Platforms</span>
                            </div>
                            <ul class="file-list">
                                <li><strong>src/platforms/base_adapter.py</strong> - æŠ½è±¡åŸºç±»</li>
                                <li><strong>src/platforms/pinduoduo/adapter.py</strong> - æ‹¼å¤šå¤šé€‚é…å™¨</li>
                                <li><strong>src/platforms/pinduoduo/baibuti.py</strong> - ç™¾äº¿è¡¥è´´ä¸šåŠ¡</li>
                                <li><strong>src/platforms/pinduoduo/constants.py</strong> - API å¸¸é‡</li>
                                <li><strong>src/platforms/pinduoduo/utils/</strong> - å·¥å…·é›†</li>
                                <li><strong>src/platforms/jd/</strong> - äº¬ä¸œé€‚é…å™¨ï¼ˆé¢„ç•™ï¼‰</li>
                                <li><strong>src/platforms/taobao/</strong> - æ·˜å®é€‚é…å™¨ï¼ˆé¢„ç•™ï¼‰</li>
                                <li><strong>src/platforms/meituan/</strong> - ç¾å›¢é€‚é…å™¨ï¼ˆé¢„ç•™ï¼‰</li>
                            </ul>
                        </div>

                        <div style="text-align: center; color: #999; padding: 10px;">
                            â¬‡ï¸ æ•°æ®æŒä¹…åŒ– â¬‡ï¸
                        </div>

                        <div class="component db">
                            <div class="component-title">
                                ğŸ’¾ æ•°æ®å±‚
                                <span class="badge db">SQLite</span>
                            </div>
                            <ul class="file-list">
                                <li><strong>src/database/models.py</strong> - ä¸»æ•°æ®æ¨¡å‹</li>
                                <li><strong>src/database/user_models.py</strong> - ç”¨æˆ·æ•°æ®æ¨¡å‹</li>
                                <li><strong>src/database/crud.py</strong> - æ•°æ®åº“æ“ä½œ</li>
                                <li><strong>src/database/user_crud.py</strong> - ç”¨æˆ·æ•°æ®åº“æ“ä½œ</li>
                            </ul>
                        </div>
                    </div>

                    <h3>æ•°æ®æµå›¾</h3>
                    <div class="flow-diagram">
                        <div class="flow-box">ğŸŒ å‰ç«¯è¯·æ±‚</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-box">ğŸ”Œ FastAPI</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-box">ğŸ¯ é€‚é…å™¨</div>
                        <div class="flow-arrow">â†’</div>
                        <div class="flow-box">ğŸ“± PDD API</div>
                        <div class="flow-arrow">â†”</div>
                        <div class="flow-box">ğŸ’¾ SQLite</div>
                    </div>
                </section>

                <!-- ç›®å½•ç»“æ„ -->
                <section id="directory">
                    <h2>ğŸ“ ç›®å½•ç»“æ„</h2>
                    <pre><code>æ•´ç‚¹æŠ¢åˆ¸/
â”œâ”€â”€ ğŸ“‚ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ api/                # API æ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ main.py           # ä¸»è·¯ç”±ï¼ˆç®€åŒ–ç‰ˆï¼‰
â”‚   â”‚   â”œâ”€â”€ simple.py         # æ— è®¤è¯ API
â”‚   â”‚   â””â”€â”€ auth.py           # è®¤è¯ APIï¼ˆå¤šç”¨æˆ·ç‰ˆï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.py         # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ scheduler.py      # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”‚   â”œâ”€â”€ logger.py         # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ notifier.py       # é€šçŸ¥ç³»ç»Ÿ
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ platforms/         # å¹³å°é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ base_adapter.py   # æŠ½è±¡åŸºç±»
â”‚   â”‚   â””â”€â”€ pinduoduo/        # æ‹¼å¤šå¤šå®ç°
â”‚   â”‚       â”œâ”€â”€ adapter.py    # ä¸»é€‚é…å™¨
â”‚   â”‚       â”œâ”€â”€ baibuti.py    # ç™¾äº¿è¡¥è´´ä¸šåŠ¡
â”‚   â”‚       â”œâ”€â”€ constants.py  # API å¸¸é‡
â”‚   â”‚       â””â”€â”€ utils/        # å·¥å…·é›†
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ database/          # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ models.py         # ä¸»æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user_models.py    # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ crud.py           # CRUD æ“ä½œ
â”‚   â”‚   â””â”€â”€ user_crud.py      # ç”¨æˆ· CRUD
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ clients/           # HTTP å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ http_client.py    # HTTP å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ browser_client.py # æµè§ˆå™¨å®¢æˆ·ç«¯
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ platform.py       # å¹³å°æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ coupon.py         # ä¼˜æƒ åˆ¸æ¨¡å‹
â”‚   â”‚   â””â”€â”€ task.py           # ä»»åŠ¡æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ cli/               # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”‚   â””â”€â”€ main.py           # CLI å…¥å£
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ tools/             # å·¥å…·é›†
â”‚       â””â”€â”€ cookie_grabber/   # Cookie è·å–å·¥å…·
â”‚
â”œâ”€â”€ ğŸ“‚ web/                   # Vue.js å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue          # ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.vue        # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ api.js           # API å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ main.js          # å…¥å£
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“‚ config/                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml          # ä¸»é…ç½®
â”‚   â””â”€â”€ cookies/             # Cookie å­˜å‚¨
â”‚
â”œâ”€â”€ ğŸ“‚ data/                  # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ baibuti.db           # SQLite æ•°æ®åº“
â”‚
â”œâ”€â”€ ğŸ“‚ logs/                  # æ—¥å¿—ç›®å½•
â”œâ”€â”€ ğŸ“‚ tests/                 # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ tools/                 # ç‹¬ç«‹å·¥å…·è„šæœ¬
â”œâ”€â”€ ğŸ“‚ docs/                  # æ–‡æ¡£ç›®å½•
â”‚
â”œâ”€â”€ start_web.py             # Web æœåŠ¡å…¥å£
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”œâ”€â”€ .gitignore
â”œâ”€â”€ CLAUDE.md                # é¡¹ç›®è¯´æ˜
â””â”€â”€ README.md</code></pre>
                </section>

                <!-- æ ¸å¿ƒæ¨¡å—è¯´æ˜ -->
                <section id="modules">
                    <h2>ğŸ”§ æ ¸å¿ƒæ¨¡å—è¯´æ˜</h2>

                    <div class="tab-container">
                        <div class="tabs">
                            <button class="tab active" onclick="switchTab(event, 'platform-adapter')">å¹³å°é€‚é…å™¨</button>
                            <button class="tab" onclick="switchTab(event, 'database')">æ•°æ®åº“</button>
                            <button class="tab" onclick="switchTab(event, 'scheduler')">è°ƒåº¦å™¨</button>
                            <button class="tab" onclick="switchTab(event, 'api-layer')">API å±‚</button>
                        </div>

                        <div id="platform-adapter" class="tab-content active">
                            <h4>å¹³å°é€‚é…å™¨æ¨¡å¼</h4>
                            <p>æ‰€æœ‰å¹³å°ç»§æ‰¿è‡ª <code>BaseAdapter</code> æŠ½è±¡åŸºç±»ï¼Œå®ç°ç»Ÿä¸€æ¥å£ï¼š</p>
                            <pre><code>class BaseAdapter(ABC):
    @abstractmethod
    async def login(self) -> TaskResult

    @abstractmethod
    async def grab_coupon(self, coupon: CouponModel) -> TaskResult

    @abstractmethod
    async def check_coupon_status(self, coupon: CouponModel) -> Dict</code></pre>

                            <h4>æ‹¼å¤šå¤šé€‚é…å™¨</h4>
                            <ul class="file-list">
                                <li>PinduoduoAdapter - ä¸»é€‚é…å™¨å®ç°</li>
                                <li>BaiButiManager - ç™¾äº¿è¡¥è´´ä¸“ç”¨ç®¡ç†å™¨</li>
                                <li>ç­¾åç”Ÿæˆå·¥å…·</li>
                                <li>è§£æå·¥å…·</li>
                            </ul>
                        </div>

                        <div id="database" class="tab-content">
                            <h4>æ•°æ®åº“è¡¨ç»“æ„</h4>
                            <table>
                                <tr>
                                    <th>è¡¨å</th>
                                    <th>ç”¨é€”</th>
                                    <th>å…³é”®å­—æ®µ</th>
                                </tr>
                                <tr>
                                    <td>checkin_records</td>
                                    <td>ç­¾åˆ°è®°å½•</td>
                                    <td>user_id, checkin_date, points_gained</td>
                                </tr>
                                <tr>
                                    <td>grab_records</td>
                                    <td>æŠ¢åˆ¸è®°å½•</td>
                                    <td>user_id, grab_date, coupon_value</td>
                                </tr>
                                <tr>
                                    <td>points_records</td>
                                    <td>ç§¯åˆ†è®°å½•</td>
                                    <td>user_id, points_change, balance</td>
                                </tr>
                                <tr>
                                    <td>users</td>
                                    <td>ç”¨æˆ·è´¦æˆ·</td>
                                    <td>username, password_hash, pdd_cookies</td>
                                </tr>
                                <tr>
                                    <td>user_sessions</td>
                                    <td>ä¼šè¯ç®¡ç†</td>
                                    <td>token, user_id, expires_at</td>
                                </tr>
                            </table>
                        </div>

                        <div id="scheduler" class="tab-content">
                            <h4>å¼‚æ­¥è°ƒåº¦å™¨ç‰¹æ€§</h4>
                            <ul>
                                <li>âœ… æ¯«ç§’çº§å®šæ—¶ç²¾åº¦</li>
                                <li>âœ… å·¥ä½œæ± å¹¶å‘æ§åˆ¶</li>
                                <li>âœ… æŒ‡æ•°é€€é¿é‡è¯•</li>
                                <li>âœ… ä¼˜é›…å…³é—­æœºåˆ¶</li>
                            </ul>
                            <pre><code>class AsyncScheduler:
    def __init__(self, max_workers: int = 10)
    async def schedule(self, task: Coroutine, run_at: datetime)
    async def precise_grab(self, url: str, timestamp: int)</code></pre>
                        </div>

                        <div id="api-layer" class="tab-content">
                            <h4>API ç«¯ç‚¹</h4>
                            <table>
                                <tr>
                                    <th>ç«¯ç‚¹</th>
                                    <th>æ–¹æ³•</th>
                                    <th>è®¤è¯</th>
                                    <th>è¯´æ˜</th>
                                </tr>
                                <tr>
                                    <td>/api/health</td>
                                    <td>GET</td>
                                    <td>âŒ</td>
                                    <td>å¥åº·æ£€æŸ¥</td>
                                </tr>
                                <tr>
                                    <td>/api/status</td>
                                    <td>POST</td>
                                    <td>âŒ</td>
                                    <td>è´¦æˆ·çŠ¶æ€</td>
                                </tr>
                                <tr>
                                    <td>/api/checkin</td>
                                    <td>POST</td>
                                    <td>âŒ</td>
                                    <td>æ¯æ—¥ç­¾åˆ°</td>
                                </tr>
                                <tr>
                                    <td>/api/grab</td>
                                    <td>POST</td>
                                    <td>âŒ</td>
                                    <td>æŠ¢å–ä¼˜æƒ åˆ¸</td>
                                </tr>
                                <tr>
                                    <td>/api/auth/register</td>
                                    <td>POST</td>
                                    <td>âŒ</td>
                                    <td>ç”¨æˆ·æ³¨å†Œ</td>
                                </tr>
                                <tr>
                                    <td>/api/auth/login</td>
                                    <td>POST</td>
                                    <td>âŒ</td>
                                    <td>ç”¨æˆ·ç™»å½•</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- é‡æ„å»ºè®® -->
                <section id="refactor">
                    <h2>ğŸ”¨ é‡æ„å»ºè®®</h2>

                    <div class="warning">
                        <strong>âš ï¸ é‡è¦:</strong> ä»¥ä¸‹æ˜¯åŸºäºä»£ç åˆ†æçš„é‡æ„å»ºè®®ï¼Œæ—¨åœ¨æé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚
                    </div>

                    <h3>ğŸš¨ é«˜ä¼˜å…ˆçº§é—®é¢˜</h3>

                    <div class="refactor-item priority-high">
                        <div class="refactor-title">
                            1. API æ¶æ„é‡å¤é—®é¢˜
                            <span class="priority-tag high">é«˜ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>é—®é¢˜æè¿°:</strong> å­˜åœ¨ä¸¤å¥— API ç³»ç»Ÿï¼Œé€ æˆæ¶æ„æ··ä¹±ï¼š</p>
                        <ul>
                            <li><code>src/api/main.py</code> + <code>src/api/simple.py</code> - ç®€åŒ–ç‰ˆ APIï¼ˆæ— è®¤è¯ï¼‰</li>
                            <li><code>src/api/auth.py</code> - å®Œæ•´è®¤è¯ APIï¼ˆå¤šç”¨æˆ·ï¼‰</li>
                        </ul>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>å†³å®šä½¿ç”¨å“ªå¥— API æ¶æ„</li>
                            <li>å¦‚éœ€ç®€åŒ–ç‰ˆï¼Œå°†è®¤è¯è®¾ä¸ºå¯é€‰è€Œéä¸¤å¥—ä»£ç </li>
                            <li>åˆ é™¤é‡å¤ä»£ç ï¼Œç»Ÿä¸€å…¥å£</li>
                        </ul>
                    </div>

                    <div class="refactor-item priority-high">
                        <div class="refactor-title">
                            2. æ•°æ®åº“æ¨¡å‹åˆ†æ•£
                            <span class="priority-tag high">é«˜ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>é—®é¢˜æè¿°:</strong> æ•°æ®åº“æ¨¡å‹åˆ†å¸ƒåœ¨å¤šä¸ªæ–‡ä»¶ï¼š</p>
                        <ul>
                            <li><code>src/database/models.py</code> - ä¸»æ•°æ®æ¨¡å‹ï¼ˆç­¾åˆ°ã€æŠ¢åˆ¸ã€ç§¯åˆ†ï¼‰</li>
                            <li><code>src/database/user_models.py</code> - ç”¨æˆ·æ¨¡å‹ï¼ˆç”¨æˆ·ã€ä¼šè¯ï¼‰</li>
                        </ul>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>åˆå¹¶ä¸ºå•ä¸€çš„ <code>models.py</code> æ–‡ä»¶</li>
                            <li>æˆ–æŒ‰åŠŸèƒ½æ¨¡å—æ¸…æ™°åˆ†ç»„ï¼ˆbase.py, user.py, business.pyï¼‰</li>
                        </ul>
                    </div>

                    <div class="refactor-item priority-high">
                        <div class="refactor-title">
                            3. CRUD æ“ä½œé‡å¤
                            <span class="priority-tag high">é«˜ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>é—®é¢˜æè¿°:</strong> CRUD æ“ä½œåˆ†æ•£åœ¨ï¼š</p>
                        <ul>
                            <li><code>src/database/crud.py</code></li>
                            <li><code>src/database/user_crud.py</code></li>
                        </ul>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>åˆå¹¶ä¸ºç»Ÿä¸€çš„ CRUD æ¨¡å—</li>
                            <li>ä½¿ç”¨ SQLAlchemy çš„å¼‚æ­¥ CRUD åŸºç±»å‡å°‘é‡å¤ä»£ç </li>
                        </ul>
                    </div>

                    <h3>âš ï¸ ä¸­ä¼˜å…ˆçº§æ”¹è¿›</h3>

                    <div class="refactor-item priority-medium">
                        <div class="refactor-title">
                            4. é…ç½®ç®¡ç†ä¼˜åŒ–
                            <span class="priority-tag medium">ä¸­ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>è€ƒè™‘ä½¿ç”¨ Pydantic Settings æ›¿ä»£å½“å‰çš„ dataclass é…ç½®</li>
                            <li>æ·»åŠ é…ç½®éªŒè¯ï¼ˆç±»å‹æ£€æŸ¥ã€å€¼èŒƒå›´ï¼‰</li>
                            <li>æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼ˆdev, staging, prodï¼‰</li>
                        </ul>
                    </div>

                    <div class="refactor-item priority-medium">
                        <div class="refactor-title">
                            5. é”™è¯¯å¤„ç†æ ‡å‡†åŒ–
                            <span class="priority-tag medium">ä¸­ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>å®šä¹‰ç»Ÿä¸€çš„å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„</li>
                            <li>ä½¿ç”¨ FastAPI çš„å¼‚å¸¸å¤„ç†å™¨</li>
                            <li>æ·»åŠ ç»“æ„åŒ–çš„é”™è¯¯å“åº”æ ¼å¼</li>
                        </ul>
                        <pre><code># å»ºè®®çš„å¼‚å¸¸å±‚æ¬¡
class BaseAppException(Exception):
    code: str
    message: str

class AuthenticationError(BaseAppException): ...
class CouponGrabError(BaseAppException): ...
class CookieExpiredError(BaseAppException): ...</code></pre>
                    </div>

                    <div class="refactor-item priority-medium">
                        <div class="refactor-title">
                            6. æ—¥å¿—ç³»ç»Ÿæ”¹è¿›
                            <span class="priority-tag medium">ä¸­ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>é—®é¢˜:</strong> å­˜åœ¨ä¸¤ä¸ªæ—¥å¿—æ¨¡å—ï¼š</p>
                        <ul>
                            <li><code>src/core/logger.py</code></li>
                            <li><code>src/utils/logger.py</code></li>
                        </ul>
                        <p><strong>å»ºè®®:</strong> ç»Ÿä¸€ä½¿ç”¨ loguruï¼Œåˆ é™¤å†—ä½™æ¨¡å—</p>
                    </div>

                    <h3>ğŸ’¡ ä½ä¼˜å…ˆçº§ä¼˜åŒ–</h3>

                    <div class="refactor-item priority-low">
                        <div class="refactor-title">
                            7. å¹³å°æ‰©å±•æ€§ä¼˜åŒ–
                            <span class="priority-tag low">ä½ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>å®ç°å¹³å°é€‚é…å™¨çš„è‡ªåŠ¨å‘ç°æœºåˆ¶</li>
                            <li>æ·»åŠ å¹³å°é…ç½®çš„åŠ¨æ€åŠ è½½</li>
                            <li>è€ƒè™‘ä½¿ç”¨æ’ä»¶ç³»ç»Ÿï¼ˆå¦‚ importlib.metadataï¼‰</li>
                        </ul>
                    </div>

                    <div class="refactor-item priority-low">
                        <div class="refactor-title">
                            8. æµ‹è¯•è¦†ç›–
                            <span class="priority-tag low">ä½ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆpytest + pytest-asyncioï¼‰</li>
                            <li>æ·»åŠ é›†æˆæµ‹è¯•</li>
                            <li>ç›®æ ‡è¦†ç›–ç‡: 70%+</li>
                        </ul>
                    </div>

                    <div class="refactor-item priority-low">
                        <div class="refactor-title">
                            9. æ–‡æ¡£å®Œå–„
                            <span class="priority-tag low">ä½ä¼˜å…ˆçº§</span>
                        </div>
                        <p><strong>å»ºè®®:</strong></p>
                        <ul>
                            <li>æ·»åŠ  API æ–‡æ¡£ï¼ˆå·²æœ‰ FastAPI è‡ªåŠ¨ç”Ÿæˆï¼‰</li>
                            <li>è¡¥å……æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰</li>
                            <li>æ·»åŠ å¼€å‘è€…è´¡çŒ®æŒ‡å—</li>
                        </ul>
                    </div>
                </section>

                <!-- è¿ç§»è®¡åˆ’ -->
                <section id="migration">
                    <h2>ğŸ“‹ é‡æ„è¿ç§»è®¡åˆ’</h2>

                    <h3>é˜¶æ®µ 1: æ¸…ç†é‡å¤ä»£ç ï¼ˆ1-2å¤©ï¼‰</h3>
                    <ol>
                        <li>âœ… é€‰æ‹©è¦ä½¿ç”¨çš„ API æ¶æ„ç‰ˆæœ¬</li>
                        <li>ğŸ“ åˆå¹¶ CRUD æ“ä½œæ–‡ä»¶</li>
                        <li>ğŸ“ ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ</li>
                        <li>ğŸ“ åˆ é™¤æœªä½¿ç”¨çš„å¯¼å…¥å’Œæ¨¡å—</li>
                    </ol>

                    <h3>é˜¶æ®µ 2: æ•°æ®æ¨¡å‹æ•´åˆï¼ˆ1å¤©ï¼‰</h3>
                    <ol>
                        <li>ğŸ“ åˆå¹¶ models.py å’Œ user_models.py</li>
                        <li>ğŸ“ æ›´æ–°æ‰€æœ‰å¯¼å…¥å¼•ç”¨</li>
                        <li>ğŸ“ æ·»åŠ æ•°æ®åº“è¿ç§»è„šæœ¬</li>
                    </ol>

                    <h3>é˜¶æ®µ 3: é”™è¯¯å¤„ç†æ ‡å‡†åŒ–ï¼ˆ1-2å¤©ï¼‰</h3>
                    <ol>
                        <li>ğŸ“ å®šä¹‰å¼‚å¸¸ç±»å±‚æ¬¡</li>
                        <li>ğŸ“ å®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨</li>
                        <li>ğŸ“ æ›´æ–°æ‰€æœ‰ raise è¯­å¥</li>
                    </ol>

                    <h3>é˜¶æ®µ 4: æµ‹è¯•å’Œæ–‡æ¡£ï¼ˆ2-3å¤©ï¼‰</h3>
                    <ol>
                        <li>ğŸ“ ç¼–å†™å•å…ƒæµ‹è¯•</li>
                        <li>ğŸ“ ç¼–å†™é›†æˆæµ‹è¯•</li>
                        <li>ğŸ“ æ›´æ–°æ–‡æ¡£</li>
                    </ol>

                    <div class="info">
                        <strong>ğŸ“Œ æ³¨æ„:</strong> é‡æ„æ—¶åº”ä¿æŒå‘åå…¼å®¹ï¼Œæˆ–æä¾›è¿ç§»å·¥å…·ã€‚å»ºè®®åœ¨åŠŸèƒ½åˆ†æ”¯è¿›è¡Œé‡æ„ï¼Œå……åˆ†æµ‹è¯•åå†åˆå¹¶ã€‚
                    </div>
                </section>

                <!-- API è·¯ç”±è¡¨ -->
                <section id="api-reference">
                    <h2>ğŸ“– API è·¯ç”±å‚è€ƒ</h2>

                    <table>
                        <thead>
                            <tr>
                                <th>è·¯å¾„</th>
                                <th>æ–¹æ³•</th>
                                <th>è®¤è¯</th>
                                <th>æè¿°</th>
                                <th>æ–‡ä»¶ä½ç½®</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>/</td>
                                <td>GET</td>
                                <td>âŒ</td>
                                <td>æ ¹è·¯å¾„ï¼Œè¿”å› API ä¿¡æ¯</td>
                                <td>main.py:30</td>
                            </tr>
                            <tr>
                                <td>/api/health</td>
                                <td>GET</td>
                                <td>âŒ</td>
                                <td>å¥åº·æ£€æŸ¥</td>
                                <td>simple.py</td>
                            </tr>
                            <tr>
                                <td>/api/status</td>
                                <td>POST</td>
                                <td>âŒ</td>
                                <td>è·å–ç”¨æˆ·çŠ¶æ€</td>
                                <td>simple.py</td>
                            </tr>
                            <tr>
                                <td>/api/checkin</td>
                                <td>POST</td>
                                <td>âŒ</td>
                                <td>æ¯æ—¥ç­¾åˆ°</td>
                                <td>simple.py</td>
                            </tr>
                            <tr>
                                <td>/api/grab</td>
                                <td>POST</td>
                                <td>âŒ</td>
                                <td>æŠ¢å–ä¼˜æƒ åˆ¸</td>
                                <td>simple.py</td>
                            </tr>
                            <tr>
                                <td>/api/records/checkin</td>
                                <td>POST</td>
                                <td>âŒ</td>
                                <td>ç­¾åˆ°å†å²</td>
                                <td>simple.py</td>
                            </tr>
                            <tr>
                                <td>/api/records/grab</td>
                                <td>POST</td>
                                <td>âŒ</td>
                                <td>æŠ¢åˆ¸å†å²</td>
                                <td>simple.py</td>
                            </tr>
                            <tr>
                                <td>/api/stats</td>
                                <td>POST</td>
                                <td>âŒ</td>
                                <td>ç»Ÿè®¡æ•°æ®</td>
                                <td>simple.py</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

            </main>

            <!-- ä¾§è¾¹å¯¼èˆª -->
            <nav class="nav-menu">
                <h3>ğŸ“‘ ç›®å½•å¯¼èˆª</h3>
                <ul>
                    <li><a href="#overview">ğŸ“Š é¡¹ç›®æ¦‚è§ˆ</a></li>
                    <li><a href="#architecture">ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</a></li>
                    <li><a href="#directory">ğŸ“ ç›®å½•ç»“æ„</a></li>
                    <li><a href="#modules">ğŸ”§ æ ¸å¿ƒæ¨¡å—</a></li>
                    <li><a href="#refactor">ğŸ”¨ é‡æ„å»ºè®®</a></li>
                    <li><a href="#migration">ğŸ“‹ è¿ç§»è®¡åˆ’</a></li>
                    <li><a href="#api-reference">ğŸ“– API å‚è€ƒ</a></li>
                </ul>

                <h3 style="margin-top: 30px;">ğŸ”— å¿«é€Ÿé“¾æ¥</h3>
                <ul>
                    <li><a href="../src/api/main.py" target="_blank">API ä¸»æ–‡ä»¶</a></li>
                    <li><a href="../src/platforms/base_adapter.py" target="_blank">é€‚é…å™¨åŸºç±»</a></li>
                    <li><a href="../src/database/models.py" target="_blank">æ•°æ®æ¨¡å‹</a></li>
                    <li><a href="../CLAUDE.md" target="_blank">é¡¹ç›®è¯´æ˜</a></li>
                </ul>
            </nav>
        </div>

        <footer style="text-align: center; padding: 30px; color: #666; margin-top: 40px; border-top: 1px solid #dee2e6;">
            <p>æ•´ç‚¹æŠ¢åˆ¸ç³»ç»Ÿæ¶æ„æ–‡æ¡£ | ç”Ÿæˆæ—¶é—´: <span id="generated-time"></span></p>
            <p style="margin-top: 10px; font-size: 0.9em;">
                åŸºäºä»£ç è‡ªåŠ¨ç”Ÿæˆ | ç‰ˆæœ¬ 2.0.0
            </p>
        </footer>
    </div>

    <script>
        // è®¾ç½®ç”Ÿæˆæ—¶é—´
        document.getElementById('generated-time').textContent = new Date().toLocaleString('zh-CN');

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(event, tabId) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„ active ç±»
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
            document.getElementById(tabId).classList.add('active');

            // æ·»åŠ  active ç±»åˆ°ç‚¹å‡»çš„æ ‡ç­¾
            event.currentTarget.classList.add('active');
        }

        // å¹³æ»‘æ»šåŠ¨
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // é«˜äº®å½“å‰ç« èŠ‚ï¼ˆæ»šåŠ¨æ—¶ï¼‰
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-menu a[href^="#"]');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.style.fontWeight = 'normal';
                if (link.getAttribute('href') === `#${current}`) {
                    link.style.fontWeight = 'bold';
                }
            });
        });
    </script>
</body>
</html>