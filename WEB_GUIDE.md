# ç™¾äº¿è¡¥è´´Webç•Œé¢ - å®Œæ•´ä½¿ç”¨æŒ‡å—

## ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ
- **åç«¯**: FastAPI + SQLite
- **å‰ç«¯**: Vue 3 + Element Plus + Vite
- **æ•°æ®åº“**: SQLite
- **é€šä¿¡**: RESTful API

### ç›®å½•ç»“æ„
```
æ•´ç‚¹æŠ¢åˆ¸/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/           # FastAPIåç«¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ main.py    # APIä¸»æ–‡ä»¶
â”‚   â”œâ”€â”€ database/      # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ models.py  # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ crud.py    # CRUDæ“ä½œ
â”‚   â””â”€â”€ platforms/
â”‚       â””â”€â”€ pinduoduo/
â”‚           â””â”€â”€ baibuti.py  # ç™¾äº¿è¡¥è´´æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ web/               # Vueå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue   # ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.js   # å…¥å£æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ api.js    # APIå°è£…
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ data/              # SQLiteæ•°æ®åº“ç›®å½•(è‡ªåŠ¨åˆ›å»º)
â”œâ”€â”€ start_web.py       # å¯åŠ¨è„šæœ¬
â””â”€â”€ requirements.txt
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

#### Pythonä¾èµ–
```bash
pip install fastapi uvicorn sqlalchemy
```

#### Node.jsä¾èµ–
```bash
cd web
npm install
```

### 2. å¯åŠ¨æœåŠ¡

#### æ–¹å¼ä¸€ï¼šåˆ†åˆ«å¯åŠ¨(æ¨èç”¨äºå¼€å‘)

**å¯åŠ¨åç«¯API:**
```bash
python start_web.py
```
åç«¯å°†è¿è¡Œåœ¨: http://localhost:8000

**å¯åŠ¨å‰ç«¯(æ–°ç»ˆç«¯):**
```bash
cd web
npm run dev
```
å‰ç«¯å°†è¿è¡Œåœ¨: http://localhost:5173

#### æ–¹å¼äºŒï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬

åˆ›å»ºä¸€ä¸ªå¯åŠ¨è„šæœ¬ `start.bat` (Windows):

```batch
@echo off
start "ç™¾äº¿è¡¥è´´API" python start_web.py
timeout /t 3 /nobreak > nul
cd web
start "ç™¾äº¿è¡¥è´´å‰ç«¯" npm run dev
echo æœåŠ¡å·²å¯åŠ¨
echo API: http://localhost:8000
echo å‰ç«¯: http://localhost:5173
```

### 3. è®¿é—®ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5173

## åŠŸèƒ½è¯´æ˜

### ä¸»ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ ç™¾äº¿è¡¥è´´è‡ªåŠ¨åŒ–ç³»ç»Ÿ          ç”¨æˆ·ID      â”‚ â† é¡¶éƒ¨å¯¼èˆª
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚                                  â”‚
â”‚  ğŸ’°ç§¯åˆ†  â”‚    ğŸ“… æ‰“å¡è®°å½• / ğŸæŠ¢åˆ¸è®°å½•      â”‚ â† ä¸»å†…å®¹åŒº
â”‚          â”‚                                  â”‚
â”‚  âš¡æ“ä½œ  â”‚                                  â”‚
â”‚          â”‚                                  â”‚
â”‚  ğŸ“Šç»Ÿè®¡  â”‚                                  â”‚
â”‚          â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   å·¦ä¾§è¾¹æ 
```

### å·¦ä¾§è¾¹æ 

#### ğŸ’° ç§¯åˆ†å¡ç‰‡
- æ˜¾ç¤ºå½“å‰ç§¯åˆ†ä½™é¢
- ç§¯åˆ†>=100æ—¶æ˜¾ç¤º"å¯æŠ¢åˆ¸"
- ç§¯åˆ†<100æ—¶æ˜¾ç¤º"ç§¯åˆ†ä¸è¶³"

#### âš¡ å¿«æ·æ“ä½œ
1. **ğŸ“… æ¯æ—¥æ‰“å¡**
   - ç‚¹å‡»æ‰§è¡Œæ¯æ—¥æ‰“å¡
   - ä»Šæ—¥å·²æ‰“å¡åæŒ‰é’®ç¦ç”¨
   - æˆåŠŸåè·å¾—ç§¯åˆ†

2. **ğŸ æŠ¢5å…ƒåˆ¸**
   - ç‚¹å‡»æŠ¢å–5å…ƒæ— é—¨æ§›åˆ¸
   - éœ€è¦100ç§¯åˆ†
   - æ¯å¤©1æ¬¡ï¼Œæ¯å‘¨2æ¬¡
   - è‡ªåŠ¨æ£€æŸ¥é™åˆ¶

3. **åˆ·æ–°çŠ¶æ€**
   - æ‰‹åŠ¨åˆ·æ–°å½“å‰çŠ¶æ€

#### ğŸ“Š ç»Ÿè®¡ä¿¡æ¯
- ä»Šæ—¥å·²æŠ¢: 0/1 æ¬¡
- æœ¬å‘¨å·²æŠ¢: 0/2 æ¬¡
- ç´¯è®¡æŠ¢åˆ¸: æ€»æ¬¡æ•°
- ç´¯è®¡ä»·å€¼: æ€»é‡‘é¢
- è¿ç»­æ‰“å¡: å¤©æ•°

### ä¸»å†…å®¹åŒº

#### ğŸ“… æ‰“å¡è®°å½•
| æ—¥æœŸ | è·å¾—ç§¯åˆ† | çŠ¶æ€ | æ—¶é—´ |
|------|---------|------|------|
| 2026-02-25 | +10 | æ‰“å¡æˆåŠŸ | 2026-02-25 09:00:00 |

#### ğŸ æŠ¢åˆ¸è®°å½•
| æ—¥æœŸ | åˆ¸ä¿¡æ¯ | åˆ¸ID | çŠ¶æ€ | æ—¶é—´ |
|------|--------|------|------|------|
| 2026-02-25 | æˆåŠŸ Â¥5 | SIM_xxx | æŠ¢åˆ¸æˆåŠŸ | 2026-02-25 12:00:00 |

#### ğŸ“ æ“ä½œæ—¥å¿—
- å®æ—¶æ˜¾ç¤ºæ‰€æœ‰æ“ä½œè®°å½•
- æˆåŠŸ/è­¦å‘Š/é”™è¯¯çŠ¶æ€
- è‡ªåŠ¨æ»šåŠ¨æœ€æ–°è®°å½•

## APIæ¥å£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:8000/api`
- **Content-Type**: `application/json`

### ä¸»è¦æ¥å£

#### 1. è·å–çŠ¶æ€
```http
GET /api/status
```

**å“åº”:**
```json
{
  "user_id": "13750005447",
  "current_points": 150,
  "can_grab_today": true,
  "can_grab_week": true,
  "today_grab_count": 0,
  "week_grab_count": 0,
  "total_grab_count": 5,
  "total_grab_value": 25.0,
  "today_checkin": false,
  "consecutive_days": 7,
  "total_checkins": 30
}
```

#### 2. æ‰§è¡Œæ‰“å¡
```http
POST /api/checkin
```

**å“åº”:**
```json
{
  "success": true,
  "message": "æ‰“å¡æˆåŠŸ",
  "points_gained": 10,
  "total_points": 160
}
```

#### 3. æ‰§è¡ŒæŠ¢åˆ¸
```http
POST /api/grab
```

**å“åº”:**
```json
{
  "success": true,
  "message": "æŠ¢åˆ¸æˆåŠŸ",
  "coupon_id": "SIM_1772005055",
  "daily_count": 1,
  "weekly_count": 1
}
```

#### 4. è·å–æ‰“å¡è®°å½•
```http
GET /api/records/checkin?days=7
```

#### 5. è·å–æŠ¢åˆ¸è®°å½•
```http
GET /api/records/grab?days=7
```

#### 6. è·å–ç»Ÿè®¡ä¿¡æ¯
```http
GET /api/stats
```

## æ•°æ®åº“

### è¡¨ç»“æ„

#### æ‰“å¡è®°å½•è¡¨ (checkin_records)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| user_id | String | ç”¨æˆ·ID |
| checkin_date | String | æ‰“å¡æ—¥æœŸ |
| points_gained | Integer | è·å¾—ç§¯åˆ† |
| total_points | Integer | æ€»ç§¯åˆ† |
| success | Boolean | æ˜¯å¦æˆåŠŸ |
| message | Text | æ¶ˆæ¯ |
| created_at | DateTime | åˆ›å»ºæ—¶é—´ |

#### æŠ¢åˆ¸è®°å½•è¡¨ (grab_records)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| user_id | String | ç”¨æˆ·ID |
| grab_date | String | æŠ¢åˆ¸æ—¥æœŸ |
| grab_week | String | å‘¨æ ‡è¯† |
| coupon_id | String | åˆ¸ID |
| coupon_value | Float | åˆ¸é¢å€¼ |
| success | Boolean | æ˜¯å¦æˆåŠŸ |
| message | Text | æ¶ˆæ¯ |
| created_at | DateTime | åˆ›å»ºæ—¶é—´ |

#### ç§¯åˆ†è®°å½•è¡¨ (points_records)
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| user_id | String | ç”¨æˆ·ID |
| record_date | String | è®°å½•æ—¥æœŸ |
| points_change | Integer | ç§¯åˆ†å˜åŒ– |
| points_balance | Integer | ç§¯åˆ†ä½™é¢ |
| reason | String | åŸå›  |
| created_at | DateTime | åˆ›å»ºæ—¶é—´ |

## æ•°æ®å­˜å‚¨ä½ç½®

æ•°æ®åº“æ–‡ä»¶: `data/baibuti.db`

## å¸¸è§é—®é¢˜

### Q1: å‰ç«¯æ— æ³•è¿æ¥åç«¯
**A:** ç¡®ä¿åç«¯å·²å¯åŠ¨åœ¨ http://localhost:8000

### Q2: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥
**A:** æ£€æŸ¥ `data/` ç›®å½•æ˜¯å¦æœ‰å†™å…¥æƒé™

### Q3: æ‰“å¡/æŠ¢åˆ¸æ²¡æœ‰ååº”
**A:**
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
2. æ£€æŸ¥åç«¯æ—¥å¿—
3. ç¡®è®¤Cookieæ˜¯å¦æœ‰æ•ˆ

### Q4: ç§¯åˆ†ä¸æ›´æ–°
**A:** å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®,éœ€è¦æ¥å…¥çœŸå®API

### Q5: å¦‚ä½•ä¿®æ”¹è´¦å·é…ç½®
**A:** ç¼–è¾‘ `src/api/main.py` ä¸­çš„ `ACCOUNT` é…ç½®

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°åŠŸèƒ½

1. **åç«¯** - åœ¨ `src/api/main.py` æ·»åŠ æ–°è·¯ç”±
2. **å‰ç«¯** - åœ¨ `web/src/api.js` æ·»åŠ APIè°ƒç”¨æ–¹æ³•
3. **ç•Œé¢** - åœ¨ `web/src/App.vue` æ·»åŠ UIç»„ä»¶

### è‡ªå®šä¹‰æ ·å¼

ç¼–è¾‘ `web/src/App.vue` çš„ `<style>` éƒ¨åˆ†

### ä¿®æ”¹APIåœ°å€

ç¼–è¾‘ `web/src/api.js` çš„ `baseURL`

## ç”Ÿäº§éƒ¨ç½²

### åç«¯éƒ¨ç½²
```bash
# ä½¿ç”¨gunicornéƒ¨ç½²
pip install gunicorn
gunicorn -w 4 -k uvicorn.workers.UvicornWorker src.api.main:app
```

### å‰ç«¯éƒ¨ç½²
```bash
cd web
npm run build
# å°†distç›®å½•éƒ¨ç½²åˆ°Nginxæˆ–å…¶ä»–WebæœåŠ¡å™¨
```

### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;

    # å‰ç«¯
    location / {
        root /path/to/web/dist;
        try_files $uri $uri/ /index.html;
    }

    # APIä»£ç†
    location /api {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## æ—¥å¿—

### åç«¯æ—¥å¿—
- æ§åˆ¶å°è¾“å‡º
- å¯é…ç½®æ—¥å¿—æ–‡ä»¶

### å‰ç«¯æ—¥å¿—
- æµè§ˆå™¨å¼€å‘è€…å·¥å…·Console

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-25)
- âœ… å®Œæ•´çš„Webç•Œé¢
- âœ… SQLiteæ•°æ®æŒä¹…åŒ–
- âœ… æ‰“å¡/æŠ¢åˆ¸åŠŸèƒ½
- âœ… è®°å½•æŸ¥è¯¢
- âœ… ç»Ÿè®¡å±•ç¤º
- âœ… å®æ—¶çŠ¶æ€æ›´æ–°

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜,è¯·æ£€æŸ¥:
1. åç«¯æ—¥å¿—: http://localhost:8000/docs
2. æµè§ˆå™¨æ§åˆ¶å°
3. æ•°æ®åº“æ–‡ä»¶: data/baibuti.db
